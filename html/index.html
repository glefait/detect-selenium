<html>
<head>
  <style>
  .no_bot {
    background-color: green;
  }
  .bot {
    background-color: red;
  }
  </style>
</head>
<body>
  <a href="/">click to refresh</a>
<table>
  <tr>
    <td id="id_webdriver">webdriver</td>
  </tr>
  <tr>
    <td id="id_selenium">selenium</td>
  </tr>
  <tr>
    <td id="id_phantom">phantom</td>
  </tr>
  <tr>
    <td id="id_nightmareJS">nightmareJS</td>
  </tr>
</table>

<script>
function test_bot(id, test_result) {
  if(test_result) {
    document.getElementById(id).className = "bot";
  } else {
    document.getElementById(id).className = "no_bot";
  }
}
function nightmareJS_presence(){
  return !!window.__nightmare;
}
function phantom_presence(){
  return (
    'callPhantom' in window |
    '_phantom' in window |
    'phantom' in window
  );
}
function webdriver_presence(){
  return (
    'webdriver' in window ||
    '__webdriver_script_fn' in document ||
    '__driver_evaluate' in document ||
    '__webdriver_evaluate' in document ||
    '__fxdriver_evaluate' in document ||
    '__driver_unwrapped' in document ||
    '__webdriver_unwrapped' in document ||
    '__fxdriver_unwrapped' in document ||
    '__webdriver_script_func' in document ||
    document.documentElement.getAttribute("webdriver") !== null ||
    document.documentElement.getAttribute("driver") !== null
  );
}
function selenium_presence() {
  return (
    '_Selenium_IDE_Recorder' in window |
    'callSelenium' in window |
    '_selenium' in window |
    '__selenium_evaluate' in document |
    '__selenium_unwrapped' in document |
    document.documentElement.getAttribute("selenium") !== null
  );
}

test_bot("id_webdriver", webdriver_presence());
test_bot("id_selenium", selenium_presence());
test_bot("id_phantom", phantom_presence());
test_bot("id_nightmareJS", nightmareJS_presence());
</script>
</body>
</html>
